<html>
    <head>
        <script src="https://cdn.tailwindcss.com"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>
    <body>
        <div class="grid grid-rows-2 grid-flow-col gap-4 place-content-center">
            <img
                src="img/2024-08-23_14-51-53.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="3."
                data-answer="K"
            />
            <img
                src="img/2024-08-23_14-52-01.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="2."
                data-answer="O"
            />
            <img
                src="img/2024-08-23_14-52-15.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="2."
                data-answer="D"
            />
            <img
                src="img/2024-08-23_14-52-22.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="4."
                data-answer="U"
            />
            <img
                src="img/2024-08-23_14-52-29.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="3."
                data-answer="L"
            />
            <img
                src="img/2024-08-23_14-52-56.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="2."
                data-answer="O"
            />
            <img
                src="img/2024-08-23_14-53-02.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="2."
                data-answer="O"
            />
            <img
                src="img/2024-08-23_14-53-07.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="4."
                data-answer="M"
            />
            <img
                src="img/2024-08-23_14-53-16.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="2."
                data-answer="A"
            />
            <img
                src="img/2024-08-23_14-53-26.png"
                class="w-[6rem] self-end max-h-[10rem]"
            />
            <input
                class="bg-[#ebfaa7] border-4 border-black rounded-full w-[6rem] h-[6rem] text-[3rem] text-center outline-none"
                placeholder="3."
                data-answer="D"
            />
        </div>
        <div class="text-center hidden" id="winning-container">
            <h1 class="text-3xl">Tegid Ã¤ra!</h1>
            <button
                class="border border-gray-400 rounded m-4 p-4 bg-gray-200"
                id="retry"
            >
                Alusta uuesti
            </button>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
        <script>
            document.querySelectorAll("input").forEach((input) => {
                input.addEventListener("input", validateInput);
            });
            function validateInput(event) {
                event.target.value = event.target.value.slice(-1).toUpperCase();
                is_correct = event.target.value == event.target.dataset.answer;
                event.target.classList.remove("border-green-500");
                event.target.classList.remove("border-red-500");
                if (is_correct) {
                    event.target.classList.add("border-green-500");
                } else if (event.target.value) {
                    event.target.classList.add("border-red-500");
                }

                if (is_correct) {
                    const inputs = Array.from(
                        document.querySelectorAll("input"),
                    );
                    const currentIndex = inputs.indexOf(event.target);
                    if (currentIndex < inputs.length - 1) {
                        inputs[currentIndex + 1].focus();
                    }
                }
                finishGame();
            }

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            function finishGame() {
                const inputs = document.querySelectorAll("input");
                const allCorrect = Array.from(inputs).every((input) =>
                    input.classList.contains("border-green-500"),
                );
                if (allCorrect) {
                    interval = setInterval(() => {
                        confetti({
                            angle: randomInRange(55, 125),
                            spread: randomInRange(50, 70),
                            particleCount: randomInRange(50, 100),
                            origin: { y: 0.6 },
                        });
                    }, 300);

                    setTimeout(() => {
                        clearInterval(interval);
                    }, 2000);

                    document
                        .getElementById("winning-container")
                        .classList.remove("hidden");
                }
            }

            document
                .getElementById("retry")
                .addEventListener("click", function () {
                    location.reload(true);
                });
        </script>
    </body>
</html>
